// ==UserScript==
// @name         TextNow Desktop for Mobile
// @namespace    http://tampermonkey.net/
// @version      1.3
// @description  Render TextNow desktop web client for mobile nicely
// @author       You
// @match        https://www.textnow.com/messaging
// @icon         https://www.google.com/s2/favicons?domain=textnow.com
// @grant        none
// ==/UserScript==

(function() {
    'use strict';

document.querySelector("#bannerContainer").remove();
document.querySelector("#sidebarNavContainer").remove();
document.querySelectorAll('.rotation-manager-slot').forEach(function(a) {
        a.remove();
});

document.querySelector(".content").style.display = 'none';
document.querySelector("#viewport").setAttribute("content", "width=device-width,user-scalable=no,initial-scale=1.0");

setTimeout(function() {
    function showsidebar() {
        document.querySelector(".content").style.display = 'none';
        document.querySelector("#sidebar").style.display = 'flex';
    }

    function hidesidebar() {
        document.querySelector("#sidebar").style.display = 'none';
        document.querySelector(".content").style.display = 'flex';
    }
    
    function refreshnav() {
        var convos = document.querySelectorAll('.uikit-summary-list__cell');
        for (var convo of convos) {
            convo.onclick = hidesidebar;
        };
        document.querySelector(".js-newText").onclick = hidesidebar;
        document.querySelector('.conversation-title').onclick = showsidebar;
        document.querySelector('.js-conversation-title').onclick = showsidebar;
    }
    
    showsidebar();
    refreshnav();
    
    setInterval(function() {
        refreshnav();
    },30000);

},5000);

document.head.innerHTML += "<style>" +
".buttons-container { justify-content:unset !important; }" +
".new-dialog-container { min-width:unset !important; }" +
"#chatContainer { position:fixed !important; }" +
"#sidebar { width:100vw !important; }" +
".content { width:100vw !important; height:100vh !important; }" +
".incall-view { width:100vw !important; }" +
".profile-toolbar { width:100vw !important; }" +
"#messageView { width:100vw !important; }" +
"#chatViewFooter { width:100vw !important; }" +
"#start-video { display:none !important;}" +
"</style>";

})();
